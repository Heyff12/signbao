/**
 * rechargeB - rechargeB详情
 * @version v1.0.0
 * @link 
 * @license ISC
 */
define(function(){function e(e,a,r){var o=260,n=180,s=document.getElementById("preview"+a);console.log(e.files[0]);var d=e.files[0],g=d.name,l=d.size,h=d.type;if(l>8388608)return $(".alert_con").show(),$(".alert_con .alert_con_br").html("图片不能大于8M"),$(".zheceng").show(),$("#js_pic"+a).addClass("error_data"),!1;if($("#js_pic"+a).removeClass("error_data"),e.files.length>0)if(e.files&&e.files[0]){s.innerHTML="<img id=imghead"+a+">";var c=document.getElementById("imghead"+a);c.onload=function(){var e=t(o,n,c.offsetWidth,c.offsetHeight);c.width=e.width,c.height=e.height,c.style.marginTop=e.top+"px"};var f=new FileReader;f.onload=function(e){c.src=e.target.result;var t=20;c.src=i.compress(c,t).src;try{localStorage.setItem(r,c.src)}catch(e){var a=Math.round(JSON.stringify(localStorage).length/1024);console.log("LIMIT REACHED:  "+a+"K"),console.log(e)}},f.readAsDataURL(e.files[0])}else{var p='filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale,src="';e.select();var m=document.selection.createRange().text;s.innerHTML="<img id=imghead"+a+">";var c=document.getElementById("imghead"+a);c.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src=m;var v=t(o,n,c.offsetWidth,c.offsetHeight);status="rect:"+v.top+","+v.left+","+v.width+","+v.height,s.innerHTML="<div id=divhead"+a+" style='width:"+v.width+"px;height:"+v.height+"px;margin-top:"+v.top+"px;"+p+m+"\"'></div>"}var u="1403d7e2-3cd1-4559-9b74-8a91a7bc9313",w=new FormData($("#regis_pic"+a)[0]),e=$("#regis_pic"+a)[0][0].files[0];console.log($("#regis_pic"+a)[0]),console.log(w),console.log($("#regis_pic"+a)[0][0]),console.log($("#regis_pic"+a)[0][0].files[0]),console.log(e),w.append("file",e),w.append("token",u),w.append("file_name",g),w.append("file_size",l),w.append("file_type",h)}function t(e,t,i,a){var r={top:0,left:0,width:i,height:a};return(i>e||a>t)&&(rateWidth=i/e,rateHeight=a/t,rateWidth>rateHeight?(r.width=e,r.height=Math.round(a/rateWidth)):(r.width=Math.round(i/rateHeight),r.height=t)),r.left=Math.round((e-r.width)/2),r.top=Math.round((t-r.height)/2),r}var i={compress:function(e,t,i){var a="image/jpeg";void 0!=i&&"png"==i&&(a="image/png");var r=document.createElement("canvas");r.width=e.naturalWidth,r.height=e.naturalHeight;var o=(r.getContext("2d").drawImage(e,0,0),r.toDataURL(a,t/100)),n=new Image;return n.src=o,n}};return{previewImage:e}});